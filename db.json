{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/linear/source/css/common.styl","path":"css/common.styl","modified":0,"renderable":1},{"_id":"themes/linear/source/css/config.styl","path":"css/config.styl","modified":0,"renderable":1},{"_id":"themes/linear/source/css/response.styl","path":"css/response.styl","modified":0,"renderable":1},{"_id":"themes/linear/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/linear/source/css/fonts/google.styl","path":"css/fonts/google.styl","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/about.png","path":"images/links/about.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/blog.png","path":"images/links/blog.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/codepen.png","path":"images/links/codepen.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/dribbble.png","path":"images/links/dribbble.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/email.png","path":"images/links/email.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/feed.png","path":"images/links/feed.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/friends.png","path":"images/links/friends.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/github.png","path":"images/links/github.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/instagram.png","path":"images/links/instagram.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/link.png","path":"images/links/link.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/linkedin.png","path":"images/links/linkedin.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/qq.png","path":"images/links/qq.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/skype.png","path":"images/links/skype.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/twitter.png","path":"images/links/twitter.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/wechat.png","path":"images/links/wechat.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/youtube.png","path":"images/links/youtube.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/yuque.png","path":"images/links/yuque.png","modified":0,"renderable":1},{"_id":"themes/linear/source/images/links/zhihu.png","path":"images/links/zhihu.png","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/p1-md.md","hash":"8ab7278979d8e491e956ab4c5723f3fa1ff65328","modified":1663056622198},{"_id":"themes/linear/LICENSE","hash":"620226eaf7c118fbcd74696cd77f64eb9e7df412","modified":1663064144333},{"_id":"themes/linear/README.md","hash":"0d0bc7cb6a69de63a9b946b72192cbc4ac97ae74","modified":1663064144333},{"_id":"themes/linear/_config.yml","hash":"024602706f99cb7c51bb108290fe873702dacdfb","modified":1663064289229},{"_id":"themes/linear/package.json","hash":"6497a8549817f4a97443630ff29ba6e9415209bd","modified":1663064144337},{"_id":"themes/linear/docs/guide.md","hash":"584fd836bbf76dfa762dceae8c6c046c3c39d87d","modified":1663064144333},{"_id":"themes/linear/docs/log.md","hash":"f4e435fe91521f2ba1a9aa1f7d55e8e3b3b6230b","modified":1663064144333},{"_id":"themes/linear/languages/zh-CN.yml","hash":"840e5c2d41ff14997977cddaa23ac3f6f012d1a8","modified":1663064144333},{"_id":"themes/linear/layout/archive.ejs","hash":"28f652ff227d4e483a69e3b86f4a302e30a559e4","modified":1663064144337},{"_id":"themes/linear/layout/category.ejs","hash":"7d4eebab7ce33f2c5d6d8c6240cc8fe65ea14cd7","modified":1663064144337},{"_id":"themes/linear/languages/default.yml","hash":"6ff8adb2312baf19cbdcd0ff17f6794f16f6062a","modified":1663064144333},{"_id":"themes/linear/layout/index.ejs","hash":"7af11efda166e4fc807a4da634239cf3b96cef65","modified":1663064144337},{"_id":"themes/linear/layout/layout.ejs","hash":"690eaf42cc4736b5fd499c6c380b306611ed5ea1","modified":1663064144337},{"_id":"themes/linear/layout/page.ejs","hash":"2b6f60e0ba6cd82beeabd1451b61ccb195448268","modified":1663064144337},{"_id":"themes/linear/layout/post.ejs","hash":"2b6f60e0ba6cd82beeabd1451b61ccb195448268","modified":1663064144337},{"_id":"themes/linear/layout/tag.ejs","hash":"28f652ff227d4e483a69e3b86f4a302e30a559e4","modified":1663064144337},{"_id":"themes/linear/layout/_partial/archive.ejs","hash":"d813e9f103d28ecf5afaf11d0be2800b3997ef3b","modified":1663064144333},{"_id":"themes/linear/layout/_partial/archive-post.ejs","hash":"ce379abf9001dc6c493a213704d4314a794bbdbd","modified":1663064144333},{"_id":"themes/linear/layout/_partial/article.ejs","hash":"0dd7deb69adf079e34e3495a13c172d81736d412","modified":1663064144333},{"_id":"themes/linear/layout/_partial/footer.ejs","hash":"f540fcdaf0e88ccb54b8b6b9733b6714bf43f612","modified":1663064144333},{"_id":"themes/linear/layout/_partial/head.ejs","hash":"8283f7460cb7fcfbd0112f9d064c507eb2a25679","modified":1663064144333},{"_id":"themes/linear/layout/_partial/header.ejs","hash":"0b79bf55e8adf014ff92b784c297242faf46179a","modified":1663064144333},{"_id":"themes/linear/source/css/common.styl","hash":"a31ee642a22fd96dd83c31e7296af368a9aa846a","modified":1663064144337},{"_id":"themes/linear/source/css/config.styl","hash":"d4bed522bbfdd877da5f636212acee77b8ae27e7","modified":1663064144337},{"_id":"themes/linear/source/css/response.styl","hash":"0a15399a79864f5c69b3bbc7d104a87d1de4dbdd","modified":1663064144337},{"_id":"themes/linear/layout/_partial/waline.ejs","hash":"0ce6f818cc870a64a4584ee5a105f82cb2a424af","modified":1663064144337},{"_id":"themes/linear/source/css/style.styl","hash":"6e746d38c09c23246899068ece7a335b0c7dc55d","modified":1663064144337},{"_id":"themes/linear/layout/_partial/post/date.ejs","hash":"6776686e7854f491317e69f3a1d00f3884a986e0","modified":1663064144333},{"_id":"themes/linear/layout/_partial/post/info.ejs","hash":"3cc4450f38f94789d9ef913ecb8da379838e8ddd","modified":1663064144333},{"_id":"themes/linear/layout/_partial/post/tag.ejs","hash":"2585a8d4aae3601e68eabec616723515cf77a46b","modified":1663064144337},{"_id":"themes/linear/source/css/_partial/archive-post.styl","hash":"2d0065547a6eacc9a47a9c303f656b9062b40a45","modified":1663064144337},{"_id":"themes/linear/source/css/_partial/archive.styl","hash":"14b73e45d40ee83f9beb1571ffc0340d8a91e710","modified":1663064144337},{"_id":"themes/linear/source/css/_partial/footer.styl","hash":"3f0bc805c0f3f9726fd2eef96d17f501be442488","modified":1663064144337},{"_id":"themes/linear/source/css/_partial/header.styl","hash":"f961cc42f55e51aa528ae5beb0320e5c1f640422","modified":1663064144337},{"_id":"themes/linear/source/css/_partial/article.styl","hash":"844e5b4f59e9952675f4d51ba705e44f52f7c1b0","modified":1663064144337},{"_id":"themes/linear/source/images/links/about.png","hash":"48eff8470014e345a88a0739ebfb769fa0ae5b6b","modified":1663064144337},{"_id":"themes/linear/source/images/links/blog.png","hash":"799d8de2adf030008a0292f07557639e293751b0","modified":1663064144337},{"_id":"themes/linear/source/images/links/codepen.png","hash":"48aaebe04f3a88388b8e0918f4a099b46d883232","modified":1663064144337},{"_id":"themes/linear/source/images/links/dribbble.png","hash":"a308c9a4d4335e59dd0d93fc35fc24121c36d459","modified":1663064144337},{"_id":"themes/linear/source/images/links/email.png","hash":"4093db7c6fc97853b36ec0665b8ddb3763489dab","modified":1663064144337},{"_id":"themes/linear/source/css/fonts/google.styl","hash":"5563f0367a509828f667005b253a04da0b5a12d3","modified":1663064144337},{"_id":"themes/linear/source/images/links/feed.png","hash":"0a746dab71dca2025f63584dbd222dc5e0707ba8","modified":1663064144337},{"_id":"themes/linear/source/images/links/friends.png","hash":"a47fde3aeaf569dd9049d466c93b28ec85685b8f","modified":1663064144337},{"_id":"themes/linear/source/images/links/github.png","hash":"339087dfb4e615bb8c40f9cca7f202a0396b3717","modified":1663064144337},{"_id":"themes/linear/source/images/links/instagram.png","hash":"48c1e3df64fa30b74f01bbed6911d7e5962d73ea","modified":1663064144337},{"_id":"themes/linear/source/images/links/link.png","hash":"00104f71810af6dc61a3be0f39c16497fc475a53","modified":1663064144337},{"_id":"themes/linear/source/images/links/twitter.png","hash":"f9176b8a90656f86b2e1b90a3e084917dee5dd50","modified":1663064144337},{"_id":"themes/linear/source/images/links/wechat.png","hash":"3a190d43caddf93a96b92832ccb76741ffb5f18b","modified":1663064144337},{"_id":"themes/linear/source/images/links/youtube.png","hash":"9f2f5c958674e4491948af8b0513b47167c06e03","modified":1663064144337},{"_id":"themes/linear/source/images/links/yuque.png","hash":"75e716ddefd77babd13854fba8ffd6f8bfff388c","modified":1663064144337},{"_id":"themes/linear/source/images/links/zhihu.png","hash":"d2a1d957625923884da96be87fca92795bfc92b9","modified":1663064144337},{"_id":"themes/linear/source/images/links/skype.png","hash":"d3bd54a698934f91ad1904e50c484cbbf3e4cd95","modified":1663064144337},{"_id":"themes/linear/source/images/links/qq.png","hash":"8ca9c35d73edec9e81b1fcfd3c80d21ffea54939","modified":1663064144337},{"_id":"themes/linear/source/images/links/linkedin.png","hash":"6ba2cb2b20535ca5bac1df709ad933fd42ccddc0","modified":1663064144337},{"_id":"public/2022/09/12/p1-md/index.html","hash":"f71034b9744413cffa492e2e5bd48a9ec38d931d","modified":1663064694124},{"_id":"public/archives/index.html","hash":"b31def614e68a77f3acebea8dbe1fbbb94a30e88","modified":1663064827795},{"_id":"public/archives/2022/index.html","hash":"adbcf30c0c6f23fe76cfc9babc0332fae8c0ec4a","modified":1663064827795},{"_id":"public/archives/2022/09/index.html","hash":"c5947cb80dee2e70a4b9c7a5a9cc0e263fa4e4d0","modified":1663064827795},{"_id":"public/index.html","hash":"1e2a966074f11bb29e895453e1436f3277ba1f6d","modified":1663064827795},{"_id":"public/images/links/about.png","hash":"48eff8470014e345a88a0739ebfb769fa0ae5b6b","modified":1663064694124},{"_id":"public/images/links/blog.png","hash":"799d8de2adf030008a0292f07557639e293751b0","modified":1663064694124},{"_id":"public/images/links/codepen.png","hash":"48aaebe04f3a88388b8e0918f4a099b46d883232","modified":1663064694124},{"_id":"public/images/links/dribbble.png","hash":"a308c9a4d4335e59dd0d93fc35fc24121c36d459","modified":1663064694124},{"_id":"public/images/links/email.png","hash":"4093db7c6fc97853b36ec0665b8ddb3763489dab","modified":1663064694124},{"_id":"public/images/links/feed.png","hash":"0a746dab71dca2025f63584dbd222dc5e0707ba8","modified":1663064694124},{"_id":"public/images/links/friends.png","hash":"a47fde3aeaf569dd9049d466c93b28ec85685b8f","modified":1663064694124},{"_id":"public/images/links/github.png","hash":"339087dfb4e615bb8c40f9cca7f202a0396b3717","modified":1663064694124},{"_id":"public/images/links/instagram.png","hash":"48c1e3df64fa30b74f01bbed6911d7e5962d73ea","modified":1663064694124},{"_id":"public/images/links/link.png","hash":"00104f71810af6dc61a3be0f39c16497fc475a53","modified":1663064694124},{"_id":"public/images/links/linkedin.png","hash":"6ba2cb2b20535ca5bac1df709ad933fd42ccddc0","modified":1663064694124},{"_id":"public/images/links/qq.png","hash":"8ca9c35d73edec9e81b1fcfd3c80d21ffea54939","modified":1663064694124},{"_id":"public/images/links/skype.png","hash":"d3bd54a698934f91ad1904e50c484cbbf3e4cd95","modified":1663064694124},{"_id":"public/images/links/youtube.png","hash":"9f2f5c958674e4491948af8b0513b47167c06e03","modified":1663064694124},{"_id":"public/images/links/wechat.png","hash":"3a190d43caddf93a96b92832ccb76741ffb5f18b","modified":1663064694124},{"_id":"public/images/links/yuque.png","hash":"75e716ddefd77babd13854fba8ffd6f8bfff388c","modified":1663064694124},{"_id":"public/images/links/twitter.png","hash":"f9176b8a90656f86b2e1b90a3e084917dee5dd50","modified":1663064694124},{"_id":"public/images/links/zhihu.png","hash":"d2a1d957625923884da96be87fca92795bfc92b9","modified":1663064694124},{"_id":"public/css/common.css","hash":"0d4cab7860995c61569757d86cf029ce94cebb2b","modified":1663064694124},{"_id":"public/css/response.css","hash":"c956d0643ae46918623efc85760d70dc9ed94f8c","modified":1663064694124},{"_id":"public/css/config.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1663064694124},{"_id":"public/css/fonts/google.css","hash":"399d13a882b2fe7e82a7c33b0d2d4165e1dddf6f","modified":1663064694124},{"_id":"public/css/style.css","hash":"09445039d35797ab35383e65d7de6927c37ea937","modified":1663064694124},{"_id":"source/_posts/test.md","hash":"b296af6a29219c13e6be9667a7516d952148cbee","modified":1663064824185},{"_id":"public/2022/09/12/test/index.html","hash":"3503a6b0989f7599adca49dab24b2534f5521b0a","modified":1663064827795}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Raid","date":"2022-09-12T19:59:55.000Z","_content":"# Raid (ubuntu 16.04)\n\n（raid 0 ,raid 1）\n\n## 准备工作：\n\n \n\n## 最少需要两块盘\n\n- 这里使用的是/dev/sdb和/dev/sdc\n\n- 通过lsblk命令查看。\n\n \n\n## 然后开始配置：\n```\n 1，sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc (raid 1只需要将level=1)\n```\n###  2,上条命令成功后可以查看/proc/mdstat文件。（可选）\n```\ncat /proc/mdstat\n```\n(raid 1可以在这一步等待一下，使二者同步（会有进度条）)\n\n### 3,格式化md0并挂载：\n```\n\n- sudo mkfs.ext4 -F /dev/md0\n\n- sudo mkdir -p /mnt/md0\n\n- sudo mount /dev/md0 /mnt/md0\n```\n### 4,查看挂载是否成功（可选）\n```\ndf -h -x devtmpfs -x tmpfs\n```\n### 5,保存Array设置\n```\nsudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf\n\nsudo update-initramfs -u\n```\n使挂载后重启有效：\n```\necho '/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0' | sudo tee -a /etc/fstab\n```\n\\---------------------------------------------------------------------------------------------------------------------------\n\n### 删除上述设置，并恢复两块盘：\n- 1,sudo umount /dev/md0 (根据设置的设备名，可以cat /proc/mdstat查看)\n- 2，\n```\nsudo mdadm --stop /dev/md0\n\nsudo mdadm --remove /dev/md0\n```\n\n-   3,查看两块盘的信息（可选）\n```\nlsblk\n```\n\n-   4,清空盘的superblock\n```\nsudo mdadm --zero-superblock /dev/sdc\n\nsudo mdadm --zero-superblock /dev/sdb\n```\n-   5,注释配置信息。\n```\n（1）sudo vim /etc/fstab\n\n. . .\n\n/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0\n\n1.  sudo vim /etc/mdadm/mdadm.conf\n\n. . .\n\n\\# ARRAY /dev/md0 metadata=1.2 name=mdadmwrite:0 UUID=7261fb9c:976d0d97:30bc63ce:85e76e91\n\n \n\n\\- 6,sudo update-initramfs -u\n\n\\---------------------------------------------------------------------------------------------------------------------------\n```\n \n\n### raid5设置方法也一样。\n\n只是最少需要三块盘\n```\nsudo mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc\n```\n其他无差别。\n\n### raid6至少需要四块盘\n```\nsudo mdadm --create --verbose /dev/md0 --level=6 --raid-devices=4 /dev/sda /dev/sdb /dev/sdc /dev/sdd\n```\n### raid10至少需要三块盘\n\n可以使用--layout指示布局，不过也可以不用。那么配置方法就与上述的一样。\n\n \n\n\\---------------------------------------------------------------------------------------------------------------------------\n\n \n\n \n\n \n\n*参考：How To Create RAID Arrays with mdadm on Ubuntu 16.04 | DigitalOcean*\n\n","source":"_posts/p1-md.md","raw":"---\ntitle: Raid \ndate: 2022-09-13 03:59:55\ntags:\n---\n# Raid (ubuntu 16.04)\n\n（raid 0 ,raid 1）\n\n## 准备工作：\n\n \n\n## 最少需要两块盘\n\n- 这里使用的是/dev/sdb和/dev/sdc\n\n- 通过lsblk命令查看。\n\n \n\n## 然后开始配置：\n```\n 1，sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc (raid 1只需要将level=1)\n```\n###  2,上条命令成功后可以查看/proc/mdstat文件。（可选）\n```\ncat /proc/mdstat\n```\n(raid 1可以在这一步等待一下，使二者同步（会有进度条）)\n\n### 3,格式化md0并挂载：\n```\n\n- sudo mkfs.ext4 -F /dev/md0\n\n- sudo mkdir -p /mnt/md0\n\n- sudo mount /dev/md0 /mnt/md0\n```\n### 4,查看挂载是否成功（可选）\n```\ndf -h -x devtmpfs -x tmpfs\n```\n### 5,保存Array设置\n```\nsudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf\n\nsudo update-initramfs -u\n```\n使挂载后重启有效：\n```\necho '/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0' | sudo tee -a /etc/fstab\n```\n\\---------------------------------------------------------------------------------------------------------------------------\n\n### 删除上述设置，并恢复两块盘：\n- 1,sudo umount /dev/md0 (根据设置的设备名，可以cat /proc/mdstat查看)\n- 2，\n```\nsudo mdadm --stop /dev/md0\n\nsudo mdadm --remove /dev/md0\n```\n\n-   3,查看两块盘的信息（可选）\n```\nlsblk\n```\n\n-   4,清空盘的superblock\n```\nsudo mdadm --zero-superblock /dev/sdc\n\nsudo mdadm --zero-superblock /dev/sdb\n```\n-   5,注释配置信息。\n```\n（1）sudo vim /etc/fstab\n\n. . .\n\n/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0\n\n1.  sudo vim /etc/mdadm/mdadm.conf\n\n. . .\n\n\\# ARRAY /dev/md0 metadata=1.2 name=mdadmwrite:0 UUID=7261fb9c:976d0d97:30bc63ce:85e76e91\n\n \n\n\\- 6,sudo update-initramfs -u\n\n\\---------------------------------------------------------------------------------------------------------------------------\n```\n \n\n### raid5设置方法也一样。\n\n只是最少需要三块盘\n```\nsudo mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc\n```\n其他无差别。\n\n### raid6至少需要四块盘\n```\nsudo mdadm --create --verbose /dev/md0 --level=6 --raid-devices=4 /dev/sda /dev/sdb /dev/sdc /dev/sdd\n```\n### raid10至少需要三块盘\n\n可以使用--layout指示布局，不过也可以不用。那么配置方法就与上述的一样。\n\n \n\n\\---------------------------------------------------------------------------------------------------------------------------\n\n \n\n \n\n \n\n*参考：How To Create RAID Arrays with mdadm on Ubuntu 16.04 | DigitalOcean*\n\n","slug":"p1-md","published":1,"updated":"2022-09-13T08:10:22.198Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl801s2wo0000mrcp2n372yi6","content":"<h1 id=\"Raid-ubuntu-16-04\"><a href=\"#Raid-ubuntu-16-04\" class=\"headerlink\" title=\"Raid (ubuntu 16.04)\"></a>Raid (ubuntu 16.04)</h1><p>（raid 0 ,raid 1）</p>\n<h2 id=\"准备工作：\"><a href=\"#准备工作：\" class=\"headerlink\" title=\"准备工作：\"></a>准备工作：</h2><p> </p>\n<h2 id=\"最少需要两块盘\"><a href=\"#最少需要两块盘\" class=\"headerlink\" title=\"最少需要两块盘\"></a>最少需要两块盘</h2><ul>\n<li><p>这里使用的是&#x2F;dev&#x2F;sdb和&#x2F;dev&#x2F;sdc</p>\n</li>\n<li><p>通过lsblk命令查看。</p>\n</li>\n</ul>\n<p> </p>\n<h2 id=\"然后开始配置：\"><a href=\"#然后开始配置：\" class=\"headerlink\" title=\"然后开始配置：\"></a>然后开始配置：</h2><pre><code> 1，sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc (raid 1只需要将level=1)\n</code></pre>\n<h3 id=\"2-上条命令成功后可以查看-x2F-proc-x2F-mdstat文件。（可选）\"><a href=\"#2-上条命令成功后可以查看-x2F-proc-x2F-mdstat文件。（可选）\" class=\"headerlink\" title=\"2,上条命令成功后可以查看&#x2F;proc&#x2F;mdstat文件。（可选）\"></a>2,上条命令成功后可以查看&#x2F;proc&#x2F;mdstat文件。（可选）</h3><pre><code>cat /proc/mdstat\n</code></pre>\n<p>(raid 1可以在这一步等待一下，使二者同步（会有进度条）)</p>\n<h3 id=\"3-格式化md0并挂载：\"><a href=\"#3-格式化md0并挂载：\" class=\"headerlink\" title=\"3,格式化md0并挂载：\"></a>3,格式化md0并挂载：</h3><pre><code>\n- sudo mkfs.ext4 -F /dev/md0\n\n- sudo mkdir -p /mnt/md0\n\n- sudo mount /dev/md0 /mnt/md0\n</code></pre>\n<h3 id=\"4-查看挂载是否成功（可选）\"><a href=\"#4-查看挂载是否成功（可选）\" class=\"headerlink\" title=\"4,查看挂载是否成功（可选）\"></a>4,查看挂载是否成功（可选）</h3><pre><code>df -h -x devtmpfs -x tmpfs\n</code></pre>\n<h3 id=\"5-保存Array设置\"><a href=\"#5-保存Array设置\" class=\"headerlink\" title=\"5,保存Array设置\"></a>5,保存Array设置</h3><pre><code>sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf\n\nsudo update-initramfs -u\n</code></pre>\n<p>使挂载后重启有效：</p>\n<pre><code>echo &#39;/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0&#39; | sudo tee -a /etc/fstab\n</code></pre>\n<p>-————————————————————————————————————————–</p>\n<h3 id=\"删除上述设置，并恢复两块盘：\"><a href=\"#删除上述设置，并恢复两块盘：\" class=\"headerlink\" title=\"删除上述设置，并恢复两块盘：\"></a>删除上述设置，并恢复两块盘：</h3><ul>\n<li>1,sudo umount &#x2F;dev&#x2F;md0 (根据设置的设备名，可以cat &#x2F;proc&#x2F;mdstat查看)</li>\n<li>2，</li>\n</ul>\n<pre><code>sudo mdadm --stop /dev/md0\n\nsudo mdadm --remove /dev/md0\n</code></pre>\n<ul>\n<li>3,查看两块盘的信息（可选）</li>\n</ul>\n<pre><code>lsblk\n</code></pre>\n<ul>\n<li>4,清空盘的superblock</li>\n</ul>\n<pre><code>sudo mdadm --zero-superblock /dev/sdc\n\nsudo mdadm --zero-superblock /dev/sdb\n</code></pre>\n<ul>\n<li>5,注释配置信息。</li>\n</ul>\n<pre><code>（1）sudo vim /etc/fstab\n\n. . .\n\n/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0\n\n1.  sudo vim /etc/mdadm/mdadm.conf\n\n. . .\n\n\\# ARRAY /dev/md0 metadata=1.2 name=mdadmwrite:0 UUID=7261fb9c:976d0d97:30bc63ce:85e76e91\n\n \n\n\\- 6,sudo update-initramfs -u\n\n\\---------------------------------------------------------------------------------------------------------------------------\n</code></pre>\n<p> </p>\n<h3 id=\"raid5设置方法也一样。\"><a href=\"#raid5设置方法也一样。\" class=\"headerlink\" title=\"raid5设置方法也一样。\"></a>raid5设置方法也一样。</h3><p>只是最少需要三块盘</p>\n<pre><code>sudo mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc\n</code></pre>\n<p>其他无差别。</p>\n<h3 id=\"raid6至少需要四块盘\"><a href=\"#raid6至少需要四块盘\" class=\"headerlink\" title=\"raid6至少需要四块盘\"></a>raid6至少需要四块盘</h3><pre><code>sudo mdadm --create --verbose /dev/md0 --level=6 --raid-devices=4 /dev/sda /dev/sdb /dev/sdc /dev/sdd\n</code></pre>\n<h3 id=\"raid10至少需要三块盘\"><a href=\"#raid10至少需要三块盘\" class=\"headerlink\" title=\"raid10至少需要三块盘\"></a>raid10至少需要三块盘</h3><p>可以使用–layout指示布局，不过也可以不用。那么配置方法就与上述的一样。</p>\n<p> </p>\n<p>-————————————————————————————————————————–</p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p><em>参考：How To Create RAID Arrays with mdadm on Ubuntu 16.04 | DigitalOcean</em></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Raid-ubuntu-16-04\"><a href=\"#Raid-ubuntu-16-04\" class=\"headerlink\" title=\"Raid (ubuntu 16.04)\"></a>Raid (ubuntu 16.04)</h1><p>（raid 0 ,raid 1）</p>\n<h2 id=\"准备工作：\"><a href=\"#准备工作：\" class=\"headerlink\" title=\"准备工作：\"></a>准备工作：</h2><p> </p>\n<h2 id=\"最少需要两块盘\"><a href=\"#最少需要两块盘\" class=\"headerlink\" title=\"最少需要两块盘\"></a>最少需要两块盘</h2><ul>\n<li><p>这里使用的是&#x2F;dev&#x2F;sdb和&#x2F;dev&#x2F;sdc</p>\n</li>\n<li><p>通过lsblk命令查看。</p>\n</li>\n</ul>\n<p> </p>\n<h2 id=\"然后开始配置：\"><a href=\"#然后开始配置：\" class=\"headerlink\" title=\"然后开始配置：\"></a>然后开始配置：</h2><pre><code> 1，sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc (raid 1只需要将level=1)\n</code></pre>\n<h3 id=\"2-上条命令成功后可以查看-x2F-proc-x2F-mdstat文件。（可选）\"><a href=\"#2-上条命令成功后可以查看-x2F-proc-x2F-mdstat文件。（可选）\" class=\"headerlink\" title=\"2,上条命令成功后可以查看&#x2F;proc&#x2F;mdstat文件。（可选）\"></a>2,上条命令成功后可以查看&#x2F;proc&#x2F;mdstat文件。（可选）</h3><pre><code>cat /proc/mdstat\n</code></pre>\n<p>(raid 1可以在这一步等待一下，使二者同步（会有进度条）)</p>\n<h3 id=\"3-格式化md0并挂载：\"><a href=\"#3-格式化md0并挂载：\" class=\"headerlink\" title=\"3,格式化md0并挂载：\"></a>3,格式化md0并挂载：</h3><pre><code>\n- sudo mkfs.ext4 -F /dev/md0\n\n- sudo mkdir -p /mnt/md0\n\n- sudo mount /dev/md0 /mnt/md0\n</code></pre>\n<h3 id=\"4-查看挂载是否成功（可选）\"><a href=\"#4-查看挂载是否成功（可选）\" class=\"headerlink\" title=\"4,查看挂载是否成功（可选）\"></a>4,查看挂载是否成功（可选）</h3><pre><code>df -h -x devtmpfs -x tmpfs\n</code></pre>\n<h3 id=\"5-保存Array设置\"><a href=\"#5-保存Array设置\" class=\"headerlink\" title=\"5,保存Array设置\"></a>5,保存Array设置</h3><pre><code>sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf\n\nsudo update-initramfs -u\n</code></pre>\n<p>使挂载后重启有效：</p>\n<pre><code>echo &#39;/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0&#39; | sudo tee -a /etc/fstab\n</code></pre>\n<p>-————————————————————————————————————————–</p>\n<h3 id=\"删除上述设置，并恢复两块盘：\"><a href=\"#删除上述设置，并恢复两块盘：\" class=\"headerlink\" title=\"删除上述设置，并恢复两块盘：\"></a>删除上述设置，并恢复两块盘：</h3><ul>\n<li>1,sudo umount &#x2F;dev&#x2F;md0 (根据设置的设备名，可以cat &#x2F;proc&#x2F;mdstat查看)</li>\n<li>2，</li>\n</ul>\n<pre><code>sudo mdadm --stop /dev/md0\n\nsudo mdadm --remove /dev/md0\n</code></pre>\n<ul>\n<li>3,查看两块盘的信息（可选）</li>\n</ul>\n<pre><code>lsblk\n</code></pre>\n<ul>\n<li>4,清空盘的superblock</li>\n</ul>\n<pre><code>sudo mdadm --zero-superblock /dev/sdc\n\nsudo mdadm --zero-superblock /dev/sdb\n</code></pre>\n<ul>\n<li>5,注释配置信息。</li>\n</ul>\n<pre><code>（1）sudo vim /etc/fstab\n\n. . .\n\n/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0\n\n1.  sudo vim /etc/mdadm/mdadm.conf\n\n. . .\n\n\\# ARRAY /dev/md0 metadata=1.2 name=mdadmwrite:0 UUID=7261fb9c:976d0d97:30bc63ce:85e76e91\n\n \n\n\\- 6,sudo update-initramfs -u\n\n\\---------------------------------------------------------------------------------------------------------------------------\n</code></pre>\n<p> </p>\n<h3 id=\"raid5设置方法也一样。\"><a href=\"#raid5设置方法也一样。\" class=\"headerlink\" title=\"raid5设置方法也一样。\"></a>raid5设置方法也一样。</h3><p>只是最少需要三块盘</p>\n<pre><code>sudo mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc\n</code></pre>\n<p>其他无差别。</p>\n<h3 id=\"raid6至少需要四块盘\"><a href=\"#raid6至少需要四块盘\" class=\"headerlink\" title=\"raid6至少需要四块盘\"></a>raid6至少需要四块盘</h3><pre><code>sudo mdadm --create --verbose /dev/md0 --level=6 --raid-devices=4 /dev/sda /dev/sdb /dev/sdc /dev/sdd\n</code></pre>\n<h3 id=\"raid10至少需要三块盘\"><a href=\"#raid10至少需要三块盘\" class=\"headerlink\" title=\"raid10至少需要三块盘\"></a>raid10至少需要三块盘</h3><p>可以使用–layout指示布局，不过也可以不用。那么配置方法就与上述的一样。</p>\n<p> </p>\n<p>-————————————————————————————————————————–</p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p><em>参考：How To Create RAID Arrays with mdadm on Ubuntu 16.04 | DigitalOcean</em></p>\n"},{"title":"test","date":"2022-09-12T22:27:04.000Z","_content":"","source":"_posts/test.md","raw":"---\ntitle: test\ndate: 2022-09-13 06:27:04\ntags:\n---\n","slug":"test","published":1,"updated":"2022-09-13T10:27:04.185Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl801uy380000rycp8gcw4zuc","content":"","site":{"data":{}},"excerpt":"","more":""}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}